# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: bmangin <bmangin@student.42lyon.fr>        +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2022/01/24 14:29:08 by bmangin           #+#    #+#              #
#    Updated: 2022/05/16 21:56:54 by bmangin          ###   ########lyon.fr    #
#                                                                              #
# **************************************************************************** #

NAME				:= ft_containers

# ********************************   PATH   ********************************** #

override PATH_S		:= srcs
override PATH_ST	:= stack
override PATH_SE	:= set
override PATH_V		:= vector
override PATH_M		:= map
override PATH_T		:= tools
override PATH_I		:= includes
override PATH_B		:= .bin

override VPATH		:= ${addprefix ${PATH_S}/, ${PATH_ST}} \
					${addprefix ${PATH_S}/, ${PATH_SE}} \
					${addprefix ${PATH_S}/, ${PATH_V}} \
					${addprefix ${PATH_S}/, ${PATH_M}} \
					${addprefix ${PATH_S}/, ${PATH_T}} \
					${PATH_S} ${PATH_I}


# *******************************   FILES   ********************************** #

FILES_S				:= main.cpp
FILES_ST			:= ${addsuffix .cpp, ${PATH_ST}}
FILES_SE			:= ${addsuffix .cpp, ${PATH_SE}}
FILES_V				:= ${addsuffix .cpp, ${PATH_V}}
FILES_M				:= ${addsuffix .cpp, ${PATH_M}}
FILES_T				:= iterator.cpp iterators_traits.cpp reverse_iterator.cpp

FILES				= ${addprefix ${PATH_ST}/, ${FILES_ST}} \
					${addprefix ${PATH_SE}/, ${FILES_SE}} \
					${addprefix ${PATH_V}/, ${FILES_V}} \
					${addprefix ${PATH_M}/, ${FILES_M}} \
					${addprefix ${PATH_T}/, ${FILES_T}} \
					${FILES_S}

SRCS				:= ${addprefix ${PATH_S}/, ${FILES}}
OBJS				:= ${SRCS:.cpp=.o}


# ******************************   INCLUDE   ********************************* #

HEADER_ST			:= ${addsuffix .hpp, ${PATH_ST}}
HEADER_SE			:= ${addsuffix .hpp, ${PATH_SE}}
HEADER_V			:= ${addsuffix .hpp, ${PATH_V}}
HEADER_M			:= ${addsuffix .hpp, ${PATH_M}}
HEADER_T			:= iterator.hpp iterators_traits.hpp reverse_iterator.hpp

HEADERS				= ${addprefix ${PATH_ST}/, ${HEADER_ST}} \
					${addprefix ${PATH_SE}/, ${HEADER_SE}} \
					${addprefix ${PATH_V}/, ${HEADER_V}} \
					${addprefix ${PATH_M}/, ${HEADER_M}} \
					${addprefix ${PATH_T}/, ${HEADER_T}}

INCS				:= ${addprefix ${PATH_I}/, ${HEADERS}}


# *****************************   COMMANDES   ******************************** #

CC					:= c++
FLAGS				:= -Werror -Wall -Wextra -std=c++98
CCF					:= ${CC} ${FLAGS} -I${PATH_I}

RM					:= rm -rf

# *****************************   MAKE SHIT   ******************************** #

all:	crea_b ${NAME}
	
${PATH_B}/%.o: %.cpp ${HEADER}
	$(CCF) -o $@ -c $<

${NAME}: ${OBJS}
	${CCF} -o ${NAME} ${OBJS}

crea_b:
	${shell mkdir -p ${PATH_B}}	


clean:
	${RM} ${PATH_B}

fclean: clean

re: fclean all

.PHONY: all clean fclean re

